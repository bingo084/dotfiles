# Enable Powerlevel10k instant prompt. Should stay close to the top of ~/.zshrc.
# Initialization code that may require console input (password prompts, [y/n]
# confirmations, etc.) must go above this block; everything else may go below.
if [[ -r "${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh" ]]; then
  source "${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh"
fi

# Path to your oh-my-zsh installation.
{{- if eq .chezmoi.os "darwin" }}
export ZSH="$HOME/.oh-my-zsh"
{{- end }}
{{- if eq .chezmoi.os "linux" }}
export ZSH=/usr/share/oh-my-zsh/
{{- end }}

# Local Proxy
export http_proxy="http://127.0.0.1:7890"
export https_proxy="http://127.0.0.1:7890"
export all_proxy="socks5://127.0.0.1:7890"

# Which plugins would you like to load?
# Standard plugins can be found in $ZSH/plugins/
# Custom plugins may be added to $ZSH_CUSTOM/plugins/
# Example format: plugins=(rails git textmate ruby lighthouse)
# Add wisely, as too many plugins slow down shell startup.
plugins=(
git
zsh-autosuggestions
zsh-syntax-highlighting
sudo
web-search
copyfile
copypath
copybuffer
dirhistory
)

source $ZSH/oh-my-zsh.sh
source ~/.bash_profile

{{- if eq .chezmoi.os "darwin" }}

# Java config
JAVA_8_HOME="/Library/Java/JavaVirtualMachines/zulu-8.jdk/Contents/Home"
JAVA_17_HOME="/opt/homebrew/opt/openjdk@17/bin"
alias j8="export JAVA_HOME=$JAVA_8_HOME && export PATH=\"$JAVA_8_HOME:$PATH\""
alias j17="export JAVA_HOME=$JAVA_17_HOME && export PATH=\"$JAVA_17_HOME:$PATH\""
# config default jdk
export JAVA_HOME=$JAVA_17_HOME
export PATH="$JAVA_HOME:$PATH"
{{- end }}

# zoxide
eval "$(zoxide init zsh)"
export _ZO_ECHO='1'

# fzf
{{- if eq .chezmoi.os "darwin" }}
[ -f ~/.fzf.zsh ] && source ~/.fzf.zsh
{{- end }}
{{- if eq .chezmoi.os "linux" }}
[ -f /usr/share/fzf/key-bindings.zsh ] && source /usr/share/fzf/key-bindings.zsh 
[ -f /usr/share/fzf/completion.zsh ] && source /usr/share/fzf/completion.zsh 
{{- end }}
source $HOME/.config/fzf/config.sh

# powerlevel10k
{{- if eq .chezmoi.os "darwin" }}
source /opt/homebrew/opt/powerlevel10k/powerlevel10k.zsh-theme
{{- end }}
{{- if eq .chezmoi.os "linux" }}
source /usr/share/zsh-theme-powerlevel10k/powerlevel10k.zsh-theme
{{- end }}
# To customize prompt, run `p10k configure` or edit ~/.p10k.zsh.
[[ ! -f ~/.p10k.zsh ]] || source ~/.p10k.zsh

# alias
alias cd="z"
alias sudo="sudo "
{{- if eq .chezmoi.os "darwin" }}
alias chrome="/Applications/Google\ Chrome.app/Contents/MacOS/Google\ Chrome --new-window"
{{- end }}
alias s="kitty +kitten ssh"
alias lg="lazygit"
alias ld="lazydocker"
alias ra="ranger"
alias v='nvim'
# alias docker
alias dp="docker ps"
alias dpa="docker ps -a"
alias dl="docker logs"
alias dlf="docker logs -f"
alias di="docker images"
# alias docker-compose
alias dcp="docker-compose ps"
alias dcpa="docker-compose ps -a"
alias dcd="docker-compose down"
alias dcu="docker-compose up"
alias dcud="docker-compose up -d"
alias dcdu="docker-compose down && docker-compose up"
alias dcdud="docker-compose down && docker-compose up -d"
alias dcl="docker-compose logs"
alias dclf="docker-compose logs -f"
# alias chezmoi
alias cha="chezmoi apply"
alias chc="cd ~/.local/share/chezmoi"
alias chd="chezmoi diff"
alias che="chezmoi edit --watch"
alias chg="cd ~/.local/share/chezmoi && lazygit && cd -"
# alias systemctl
alias sst="sudo systemctl start"
alias sss="sudo systemctl status"
alias srt="sudo systemctl restart"
alias ssp="sudo systemctl stop"
alias see="sudo systemctl enable"
alias sen="sudo systemctl enable --now"
alias sust="systemctl --user start"
alias suss="systemctl --user status"
alias surt="systemctl --user restart"
alias susp="systemctl --user stop"
alias suee="systemctl --user enable"
alias suen="systemctl --user enable --now"
